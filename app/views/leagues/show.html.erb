<div class="container">
  <a href="/leagues"><i class="fa-solid fa-chevron-left"></i></a>

  <div class="d-flex justify-content-center">
  <div class="module-wrapper">
    <div class="module">
      <div class="container">

      <h3 class="text-center mb-3">
        <%= @league.name %>
      </h3>
      <h3 class="text-center mb-3" style="font-size:18px;"> Competing in:
        <strong><%= @league.sport %></strong>
        <div class="container text-center mt-3">
          <% if @league.sport == "Ping-Pong" %>
            <%= image_tag "pingpong-image.png" %>
          <% elsif @league.sport == "BeerPong" %>
            <%= image_tag "beerpong.png" %>
          <% elsif @league.sport == "Darts" %>
            <%= image_tag "darts.png" %>
          <% elsif @league.sport == "Snooker" %>
            <%= image_tag "snooker.png" %>
          <% elsif @league.sport == "Tennis" %>
            <%= image_tag "tenis.png" %>
          <% elsif @league.sport == "Weightlift" %>
            <%= image_tag "weightlift.png" %>
          <% elsif @league.sport == "Fight" %>
            <%= image_tag "fight.png" %>
          <% elsif @league.sport == "Foosball" %>
            <%= image_tag "foosball.png" %>
          <% elsif @league.sport == "Bowling" %>
            <%= image_tag "bowling.png" %>
          <% else @league.sport == "Karaoke" %>
            <%= image_tag "karaoke.png" %>
          <% end %>
        </div>
      </h3>
      <h3 class="text-center" style="font-size:18px;"> Organized by:
        <strong><%= @league.creator.first_name %> <%= @league.creator.last_name %></strong>
      </h3>



      </div>
    </div>
  </div>

    <% unless @league.matches.present? %>
      <div class="conditional-invites mt-3">
        <p>
        <div class="input-group" data-controller="clipboard" data-clipboard-feedback-text-value="Copied!" style="justify-content: center;">
          <input type="hidden" class="form-control" data-clipboard-target="input" type="text" value="<%= invitation_url %>" readonly>
          <div class="input-group-append">
          <button id="copy-button" class="btn btn-outline-primary" style="width:220px" data-action="click->clipboard#copy">Click to copy the invite link and send it to your friends</button>
          </div>
        </div>
        </p>
      </div>
    <% end %>
  </div>

  <div class="league-slider">
    <a href="/leagues/<%=@league.id%>" class="l-slider-leaderboard"><i class="fa-solid fa-table-list"></i></a>
    <a href="/leagues/<%=@league.id%>/matches" class="l-slider-matches"><i class="fa-solid fa-user-group"></i></a>
  </div>

  <div class="conditional-league-items">
    <% if @league.users.size <3 %>
      <p style="color:white; background-color:#E60F05; text-align:center; font-size:10px; width:290px; margin:auto;"><i class="fa-solid fa-triangle-exclamation"></i> Your league needs three or more players before you can start<i class="fa-solid fa-triangle-exclamation"></i></p>
    <% end %>

    <% if @league.creator == current_user && @league.matches.empty? && @league.users.size >2%>
      <div class="btn-set-matches">
        <%= link_to "Start League!", league_matches_path(@league), data: { turbo_method: :post } %>
      </div>
    <% end %>
  </div>
</div>

  <table class="table table-striped table-hover" style="background-color:#ffffff; border-radius:10px; overflow: hidden">
    <thead class="thead-light">
      <tr>
        <th scope="col">#</th>
        <th style=' text-align:center' scope="col">Players</th>
        <th scope="col">Played</th>
        <th scope="col">Won</th>
        <th scope="col">Points</th>

      </tr>
    </thead>
    <tbody>
      <% i = 1 %>
      <% @leaderboard_players.order("points DESC").each do |player| %>
        <tr>
        <th style=' text-align:center' scope="row"><%= i %></th>
        <td style=' text-align:center'><%= player.first_name %> <%= player.last_name %></td>
        <% u_l = @league.user_leagues.where("user_id = #{player.id}").first %>
        <% u_m = @league.matches.where("(player1_id = #{player.id} OR player2_id = #{player.id}) AND winner_id IS NOT NULL") %>
        <td style=' text-align:center'><%= u_m.count %></td>
        <td style=' text-align:center'><%= u_l.points / 3 %></td>
        <td style=' text-align:center'><%= u_l.points %></td>
        </tr>
      <% i += 1 %>
    <% end %>
    </tbody>
  </table>
